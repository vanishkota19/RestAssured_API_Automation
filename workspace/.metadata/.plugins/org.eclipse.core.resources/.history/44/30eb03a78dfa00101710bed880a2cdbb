package tests;

import base.BaseTest;
import client.UserClient;
import io.restassured.response.Response;
import org.testng.Assert;
import org.testng.annotations.Test;

import pojo.UserRequest;
import pojo.UserResponse;
import utils.JsonUtils;

public class CreateUserTest extends BaseTest {

    @Test
    public void createUserUsingJsonFile() {

        String jsonBody = JsonUtils.readJson(
                "src/main/resources/testdata/createUser.json");

        Response response = UserClient.createUser(jsonBody);

        Assert.assertEquals(response.statusCode(), 201);

        UserResponse userResponse = response.as(UserResponse.class);
        Assert.assertEquals(userResponse.getName(), "Vanish");
    }
    
    
    @Test
    public void createUserUsingPojo() {

        UserRequest request = new UserRequest("Vanish", "QA Architect");

        Response response = UserClient.createUser(request);

        Assert.assertEquals(response.statusCode(), 201);
    }

}
